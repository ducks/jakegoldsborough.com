<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="fediverse:creator" content="@ducks@hachyderm.io">
    <link rel="me" href="https://hachyderm.io/@ducks" />
    <meta name="author" content="Jake Goldsborough">
    <meta
      name="description"
      content="A blog about NixOS, self-hosting, Rust projects, and other tech musings. Maybe some meatspace stuff as well."
    >
    <meta name="keywords" content="NixOS, Linux, Rust, self-hosting, programming, tech blog, OSS">
    <title>
      
      Deploying a Zola static site to a custom domain with Github Actions -
      

      Jake Goldsborough
    </title>

    <link rel="stylesheet" href="https://jakegoldsborough.com/css/style.css" />

    
    <link rel="icon" href="https://jakegoldsborough.com/images/favicon.png" />
  </head>
  <body>
    <header>
      <div class="theme-picker">
        <label aria-label="Dark theme">
          <input type="radio" name="theme" value="dark" />
          <span aria-hidden="true"></span>
        </label>
        <label aria-label="Light theme">
          <input type="radio" name="theme" value="light" />
          <span aria-hidden="true"></span>
        </label>
        <noscript>
          <label aria-label="Dark theme"><span aria-hidden="true">dark</span></label>
          <label aria-label="Light theme"><span aria-hidden="true">light</span></label>
        </noscript>
      </div>
      <h1>
        <a href="https://jakegoldsborough.com/resume">Jake Goldsborough</a>
      </h1>
      <nav>
        <a
          href="https://jakegoldsborough.com/blog"
          class="active"
        >Blog</a>
        <span>|</span>
        <a
          href="https://jakegoldsborough.com/resume"
          class=""
          >Resume</a>
        <span>|</span>
        <a
          href="https://jakegoldsborough.com/contact"
          class=""
          >Contact</a>
      </nav>
    </header>

    <main>
      
  
    <article>
      <h1>Deploying a Zola static site to a custom domain with Github Actions</h1>
      
        <p>
          Published May 24, 2025
        </p>
      
      <p>
        3 min read
      </p>

      
        <p>
          Tags:
          
            <a href="/tags/rust">rust</a>, 
          
            <a href="/tags/github">github</a>, 
          
            <a href="/tags/devops">devops</a>
          
        </p>
      

      <p>As I've been searching for a new gig, I've gotten the urge to write a bit more
about some of the stuff I'm up to to help make myself stand out. I really like
using the fewest tools as needed so I knew a static site generator was what I
wanted. I also like to use Rust based tools when possible.</p>
<p>Searching for Rust static site generators lead me to
<a href="https://www.getzola.org/">Zola</a>.</p>
<p>Some of the top advertised features are no dependencies, blazingly fast,
and easy to use. Those sound great to me.</p>
<h3 id="set-up-zola-site">Set up Zola site</h3>
<p>While this isn't a few blown Zola tutorial, I did want to include a few things.</p>
<p>After installing Zola, you can simply run <code>zola init myblog</code>.</p>
<p>You'll be asked a few questions and a base site will be setup for you.</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>├── config.toml
</span><span>├── content
</span><span>├── sass
</span><span>├── static
</span><span>├── templates
</span><span>└── themes
</span></code></pre>
<p>Without going too deep, your CommonMark pages will go in <code>content</code>, Tera/HTML
templates in <code>templates</code>, and any css/js/images or other static content will go
in <code>static</code>.</p>
<p>SASS is enabled by default but can be disabled. I am not currently using SASS
personally.</p>
<p>Running <code>zola build</code> will build the site and output it a directory called <code>public</code>.</p>
<p>Here is a link to a complete overview:</p>
<p><a href="https://www.getzola.org/documentation/getting-started/overview/">https://www.getzola.org/documentation/getting-started/overview/</a></p>
<h3 id="push-to-github-create-github-actions-workflow">Push to Github &amp; Create Github Actions workflow</h3>
<p>After getting your content written, site styled, and ready for deployment, it's time to
push to Github. Create a repo and push it to a <code>main</code> branch (exclude the <code>public</code>
directory).</p>
<p>Next, we will setup the actual workflow to take our input files, setup zola,
build the site, and commit it to the correct branch.</p>
<p>Create a file at <code>.github/workflows/deploy.yml</code> and insert this:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>name: Deploy Zola to GitHub Pages
</span><span>
</span><span>on:
</span><span>  push:
</span><span>    branches: [main]
</span><span>
</span><span>jobs:
</span><span>  build-deploy:
</span><span>    runs-on: ubuntu-latest
</span><span>
</span><span>    steps:
</span><span>    - name: Check out source
</span><span>      uses: actions/checkout@v4
</span><span>
</span><span>    - name: Install Zola
</span><span>      run: |
</span><span>        curl -L https://github.com/getzola/zola/releases/download/v0.20.0/zola-v0.20.0-x86_64-unknown-linux-gnu.tar.gz -o zola.tar.gz
</span><span>        tar -xzf zola.tar.gz
</span><span>        sudo mv zola /usr/local/bin/
</span><span>
</span><span>    - name: Build site
</span><span>      run: zola build
</span><span>
</span><span>    - name: Deploy to GitHub Pages
</span><span>      uses: peaceiris/actions-gh-pages@v3
</span><span>      with:
</span><span>        github_token: ${{ secrets.GITHUB_TOKEN }}
</span><span>        publish_dir: ./public
</span><span>        publish_branch: gh-pages
</span><span>        force_orphan: true
</span></code></pre>
<p>This setups up a workflow that:</p>
<ul>
<li>watches for pushes to main branch</li>
<li>checks out the zola source and installs it</li>
<li>builds your site using zola build</li>
<li>uses github pages plugin to push <code>public</code> output dir to a <code>gh-pages</code> branch</li>
</ul>
<p>You will also need to go to your repos settings and look for the actions section
to enable write permissions.</p>
<p>Push this up and watch the build by going to your repo and clicking the "Actions"
tab. You will see a workflow that you can click into and see build and deploy
jobs.</p>
<p>If everything goes well, you can now  visit your site by filling in your values:</p>
<p>https://${username}.github.io/${repo}</p>
<h3 id="add-custom-domain-optional">Add Custom Domain (optional)</h3>
<p>After you have the initial workflow working, you will need to configure some
Github settings for a custom domain.</p>
<p>First, run <code>echo "yourdomain.com" &gt; static/CNAME</code> and commit this file.
Next, go to your Github repo's "Pages" setting and add the domain name.</p>
<h3 id="configure-dns-optional">Configure DNS (optional)</h3>
<p>If using a custom domain, you will also need to setup DNS. Go to your domain
settings and add 4 A records for Github pages:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>A	@	185.199.108.153
</span><span>A	@	185.199.109.153
</span><span>A	@	185.199.110.153
</span><span>A	@	185.199.111.153
</span></code></pre>
<p>Setup any subdirectories you might want.</p>
<p>You may need to give this step some extra time to update before you can
see your new site at your custom URL. Other times it's nearly instant so your
results may vary.</p>
<h3 id="profit">Profit</h3>
<p>That's basically it for a basic setup. You should now have a static site
setup at a custom domain that gets automatically built by just pushing a branch.</p>
<p>While simple, this is a complete setup that let's you create and deploy content
to your own URL with ease.</p>


      
        
        

        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                
                  
                
              
                
                  
                
              
                
                  
                
              
                
              
                
                  
                
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                
                  
                
              
                
                  
                
              
                
                  
                
              
                
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        

        
          <section class="related-posts">
            <h2>Related Posts</h2>
            <ul>
              
                <li>
                  <a href="https:&#x2F;&#x2F;jakegoldsborough.com&#x2F;blog&#x2F;2025&#x2F;shelltrax-part-2-footer-tests-ci&#x2F;">Shelltrax Part 2: Footer, Tests, and CI</a>
                  <span class="post-date">October 29, 2025</span>
                </li>
              
                <li>
                  <a href="https:&#x2F;&#x2F;jakegoldsborough.com&#x2F;blog&#x2F;2025&#x2F;introducing-shelltrax&#x2F;">Introducing Shelltrax - Or how I vibe programmed my way to a TUI music player</a>
                  <span class="post-date">June 24, 2025</span>
                </li>
              
                <li>
                  <a href="https:&#x2F;&#x2F;jakegoldsborough.com&#x2F;blog&#x2F;2025&#x2F;building-a-voting-system-with-git&#x2F;">Building a Fully Decentralized Voting System Using Just Git and Pull Requests</a>
                  <span class="post-date">June 23, 2025</span>
                </li>
              
                <li>
                  <a href="https:&#x2F;&#x2F;jakegoldsborough.com&#x2F;blog&#x2F;2025&#x2F;weekly-summary-20&#x2F;">Weekly Summary - 20&#x2F;52</a>
                  <span class="post-date">May 16, 2025</span>
                </li>
              
                <li>
                  <a href="https:&#x2F;&#x2F;jakegoldsborough.com&#x2F;blog&#x2F;2025&#x2F;building-a-voting-system-with-git&#x2F;">Building a Fully Decentralized Voting System Using Just Git and Pull Requests</a>
                  <span class="post-date">June 23, 2025</span>
                </li>
              
            </ul>
          </section>
        
      
    </article>
  

    </main>

    <footer>
      <p><a href="https://jakegoldsborough.com/rss.xml">Subscribe via RSS</a></p>
    </footer>

    <script src="/js/main.js"></script>
    <script data-goatcounter="https://stats.jakegoldsborough.com/count"
        async src="//stats.jakegoldsborough.com/count.js"></script>
  </body>
</html>

